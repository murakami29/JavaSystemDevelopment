<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>å•†å“ç®¡ç†ä¸€è¦§</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .btn-row {
            margin-top: 20px;
        }
        .btn-row .btn {
            width: 100%;
        }
        .btn-spacing {
            margin-bottom: 10px; /* ãƒœã‚¿ãƒ³ã®é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’ä½œã‚‹ */
        }
        .pagination {
            margin-top: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
		<div class="d-flex justify-content-end mb-4">
			<form th:action="@{/logout}" method="post">
			    <input type="submit" value="ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ">
			</form>
		</div>
        <h1>å•†å“ç®¡ç†ä¸€è¦§</h1>

        <form id="searchForm" th:action="@{/product/list}" th:object="${searchForm}" method="get" class="mb-4">
            <!-- å¤§ã‚«ãƒ†ã‚´ãƒª -->
            <div class="form-group">
                <label for="largeCategoryId">å¤§ã‚«ãƒ†ã‚´ãƒª</label>
                <select id="largeCategoryId" class="form-control" th:field="*{largeCategoryId}">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option> 
                    <option th:each="largeCategory : ${largeCategories}" th:value="${largeCategory.id}" th:text="${largeCategory.name}"></option>
                </select>
            </div>
            <!-- ä¸­ã‚«ãƒ†ã‚´ãƒª -->
            <div class="form-group">
                <label for="middleCategoryId">ä¸­ã‚«ãƒ†ã‚´ãƒª</label>
                <select id="middleCategoryId" class="form-control" th:field="*{middleCategoryId}">
					<option value="">é¸æŠã—ã¦ãã ã•ã„</option> 
                    <option th:each="middlecategory : ${middleCategories}" th:value="${middlecategory.id}" th:text="${middlecategory.name}"></option>
                </select>
            </div>
            <!-- å°ã‚«ãƒ†ã‚´ãƒª -->
            <div class="form-group">
                <label for="smallCategoryId">å°ã‚«ãƒ†ã‚´ãƒª</label>
                <select id="smallCategoryId" class="form-control" th:field="*{smallCategoryId}">
					<option value="">é¸æŠã—ã¦ãã ã•ã„</option> 
                    <option th:each="smallcategory : ${smallCategories}" th:value="${smallcategory.id}" th:text="${smallcategory.name}"></option>
                </select>
            </div>
            <!-- ãƒ•ãƒªãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ -->
            <div class="form-group">
                <label for="searchKeyword">ğŸ”æ¤œç´¢</label>
                <input type="text" id="searchKeyword" class="form-control" name="keyword" th:value="${keyword}" placeholder="å•†å“åã‚„ã‚«ãƒ†ã‚´ãƒªåã§æ¤œç´¢">
            </div>

            <div class="row btn-row">
				<div class="col-md-6 btn-spacing">
                	<button type="submit" class="btn btn-primary">æ¤œç´¢</button>
				</div>
				<div class="col-md-6">
					<button type="reset" id="resetButton" class="btn btn-secondary">ãƒªã‚»ãƒƒãƒˆ</button>
				</div>
			</div>
        </form>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>å•†å“ID</th>
                    <th>å°ã‚«ãƒ†ã‚´ãƒª</th>
                    <th>ãƒ¡ãƒ¼ã‚«ãƒ¼</th>
                    <th>å•†å“å</th>
                    <th>ä»•å…¥ã‚ŒåŸä¾¡</th>
                    <th>ãƒ¡ãƒ¼ã‚«å¸Œæœ›å°å£²ä¾¡æ ¼</th>
                    <th>ä½œæˆæ—¥æ™‚</th>
                    <th>è©³ç´°</th>
                </tr>
            </thead>
			<tbody id="product-list">
			    <!-- å•†å“ãƒªã‚¹ãƒˆãŒã“ã“ã«å‹•çš„ã«ç”Ÿæˆ -->
			</tbody>
        </table>
		
		<nav aria-label="Page navigation">
		    <ul class="pagination" id="pagination">
		        <!-- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ãŒã“ã“ã«ç”Ÿæˆ -->
		    </ul>
		</nav>
		<div class="d-flex justify-content-center">
	        <a href="/home" class="btn btn-secondary col-md-6 mb-5">TOPãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹</a>
		</div>
    </div>

    <!-- Bootstrapã®JavaScript (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
<script>	
	$(document).ready(function() {
		
		const itemsPerPage = 5;  // 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®å•†å“æ•°
		const initialPage = 1;   // åˆæœŸã®ãƒšãƒ¼ã‚¸ã‚’è¨­å®š
		let currentPage = initialPage;  // ãƒšãƒ¼ã‚¸ãŒæœªå®šç¾©ã®å ´åˆã«å‚™ãˆã¦åˆæœŸåŒ–
		let productList = {}; // å•†å“ãƒªã‚¹ãƒˆã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒšãƒ¼ã‚¸ãƒ³ã‚°å¯¾å¿œï¼‰
	    let productsContent = []; // productList.contentã®é…åˆ—ã‚’ä¿æŒã™ã‚‹
		
	    // åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã«å•†å“ãƒªã‚¹ãƒˆã‚’å–å¾—
	    loadProducts(currentPage);
	
	    function loadProducts(page) {
			const adjustedPage = page - 1;  // ã‚µãƒ¼ãƒãƒ¼å´ã¯0ãƒ™ãƒ¼ã‚¹
	        $.ajax({
	            url: `/product/api/list/page?page=${adjustedPage}&size=${itemsPerPage}`,  // ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰å•†å“ãƒªã‚¹ãƒˆã‚’å–å¾—
	            type: 'GET',
	            success: function(response) {
					console.log(response); // ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ã‚’ç¢ºèª
	                productList = response;  // ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®å•†å“ãƒªã‚¹ãƒˆã‚’ä¿æŒ
	                renderProducts();  // åˆå›ã¯1ãƒšãƒ¼ã‚¸ç›®ã‚’è¡¨ç¤º
	                renderPagination();  // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒªãƒ³ã‚¯ã‚’ä½œæˆ
					currentPage = page;  // ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã‚’æ›´æ–°
	            },
	            error: function() {
	                alert('å•†å“ãƒªã‚¹ãƒˆã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
	            }
	        });
	    }
	
	    // å•†å“ãƒªã‚¹ãƒˆã®è¡¨ç¤º
	    function renderProducts() {
			console.log('renderProductsã®productList:', productList);
			const tbody = $('#product-list');
			tbody.empty();

			// productList.contentãŒé…åˆ—ã‹ç¢ºèª
	        if (productList && Array.isArray(productList.content)) {
				productsContent = productList.content; // contenté…åˆ—ã‚’productsContentã«ä¿å­˜
				
		        const start = (currentPage - 1) * itemsPerPage;
		        const end = start + itemsPerPage;
				const displayProducts = productsContent.slice(start, end); // æŒ‡å®šã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã®å•†å“ã ã‘è¡¨ç¤º
		
		        if (displayProducts.length > 0) {
					displayProducts.forEach(product => {
						if (product && product.id) {
			                const row = `
			                    <tr>
									<td>${product.id}</td>
									<td>${product.smallCategory.name}</td>
									<td>${product.manufacturer.name}</td>
									<td>${product.name}</td>
									<td>${product.costPrice}</td>
									<td>${product.manufacturerSuggestedRetailPrice}</td>
									<td>${product.createdAt}</td>
									<td><a href="/product/details/${product.id}" class="btn btn-secondary">è©³ç´°</a></td>
			                    </tr>
			                `;
			                tbody.append(row);
						} else {
						    console.error('Invalid product:', product);
						}
		            });
		        } else {
		            tbody.append('<tr><td colspan="7" class="text-center">å•†å“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</td></tr>');
		        }
			} else {
			    console.error('Product list is not an array:', productList);
			}
	    }
	
	    // ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆ
	    function renderPagination() {
			const pagination = $('#pagination');
	        pagination.empty(); // æ—¢å­˜ã®å†…å®¹ã‚’ã‚¯ãƒªã‚¢
						
			console.log('renderPaginationã®productList:', productList);
			const totalPages = productList.totalPages; // totalPagesã‚’productListã‹ã‚‰å–å¾—
	
			console.log('Total Pages:', totalPages); // ãƒ‡ãƒãƒƒã‚°ç”¨ã«è¿½åŠ 
			
	        for (let i = 1; i <= totalPages; i++) {
	            const pageItem = `
	                <li class="page-item ${i === currentPage  ? 'active' : ''}">
	                    <a class="page-link" href="#" data-page="${i}">${i}</a>
	                </li>
	            `;
	            pagination.append(pageItem);
	        }
			// ãƒšãƒ¼ã‚¸ãƒªãƒ³ã‚¯ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‹•ä½œ
			$(document).on('click', '.page-link', function(e) {
			    e.preventDefault();
				const newPage = parseInt($(this).data('page'));

			    loadProducts(newPage);
			});
	    }
	});

    // æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡å‡¦ç†ã‚’éåŒæœŸã§å®Ÿè¡Œ
    $(document).ready(function () {
        $('#searchForm').on('submit', function (event) {
            event.preventDefault();  // ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ã‚’é˜²ã

            let formData = $(this).serialize();  // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º
			
			// å¤§ã‚«ãƒ†ã‚´ãƒªã®å€¤ã‚’å–å¾—ï¼ˆæœªé¸æŠã®å ´åˆã¯ç©ºã®æ–‡å­—åˆ—ï¼‰
			    const largeCategoryId = $('#largeCategoryId').val();
				const middleCategoryId = $('#middleCategoryId').val();
				const smallCategoryId = $('#smallCategoryId').val();

			// å¤§ã‚«ãƒ†ã‚´ãƒªã¨ä¸­ã‚«ãƒ†ã‚´ãƒªãŒé¸æŠã•ã‚Œã¦ã„ã‚Œã°ã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ 
			if (largeCategoryId) {
			    formData += `&largeCategoryId=${largeCategoryId}`;
			}
			if (middleCategoryId) {
			    formData += `&middleCategoryId=${middleCategoryId}`;
			}
			if (smallCategoryId) {
			    formData += `&smallCategoryId=${smallCategoryId}`;
			}
				
            $.ajax({
                url: '/product/api/list',  // ãƒ•ã‚©ãƒ¼ãƒ ã®actionå…ˆ
                type: 'GET',
                data: formData,  // ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡
                success: function (response) {
					console.log("ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªï¼š" + response); // ã“ã“ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª
				    response.forEach(function(item) {
				        console.log("å„ã‚¢ã‚¤ãƒ†ãƒ ã®å†…å®¹ï¼š" + 	JSON.stringify(item));  // å„ã‚¢ã‚¤ãƒ†ãƒ ã®å†…å®¹ã‚’è¡¨ç¤º
				    });
                    // æ¤œç´¢çµæœã‚’ãƒšãƒ¼ã‚¸å†…ã«è¡¨ç¤º
                    const tbody = $('tbody');
                    tbody.empty();  // ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ—¢å­˜è¡Œã‚’ã‚¯ãƒªã‚¢

                    if (response.length > 0) {
                        // çµæœãŒã‚ã‚‹å ´åˆã€ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¡Œã‚’è¿½åŠ 
                        response.forEach(product => {
                            const row = `
                                <tr>
                                    <td>${product.id}</td>
                                    <td>${product.smallCategory.name}</td>
                                    <td>${product.manufacturer.name}</td>
                                    <td>${product.name}</td>
                                    <td>${product.costPrice}</td>
                                    <td>${product.manufacturerSuggestedRetailPrice}</td>
                                    <td>${product.createdAt}</td>
                                    <td><a href="/product/details/${product.id}" class="btn btn-secondary">è©³ç´°</a></td>
                                </tr>
                            `;
                            tbody.append(row);  // æ–°ã—ã„è¡Œã‚’ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ 
                        });
                    } else {
                        // æ¤œç´¢çµæœãŒãªã„å ´åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                        tbody.append('<tr><td colspan="8" class="text-center">æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</td></tr>');
                    }
                },
                error: function () {
                    // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
                    alert('æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                }
            });
        });

	    // å¤§ã‚«ãƒ†ã‚´ãƒªå¤‰æ›´æ™‚ã«ã€ä¸­ã‚«ãƒ†ã‚´ãƒªã®ãƒªã‚¹ãƒˆã‚’æ›´æ–°ã™ã‚‹
	    $('#largeCategoryId').on('change', function () {
	        const largeCategoryId = $(this).val(); // å¤§ã‚«ãƒ†ã‚´ãƒªã®IDã‚’å–å¾—
	        console.log("å¤§ã‚«ãƒ†ã‚´ãƒªã®ID: " + largeCategoryId); // æ­£ã—ã„IDãŒå–å¾—ã§ãã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ãŸã‚ã®ãƒ­ã‚°
	
			const middleSelect = $('#middleCategoryId');
			const smallSelect = $('#smallCategoryId');
			
			middleSelect.empty().append('<option value="">é¸æŠã—ã¦ãã ã•ã„</option>');
			smallSelect.empty().append('<option value="">é¸æŠã—ã¦ãã ã•ã„</option>'); // å°ã‚«ãƒ†ã‚´ãƒªã‚‚ãƒªã‚»ãƒƒãƒˆ

	        if (largeCategoryId) {
	            $.ajax({
	                url: `/product/categories/middle`,
	                method: 'GET',
	                data: { largeCategoryId: largeCategoryId },
	                success: function (data) {
                        console.log('ä¸­ã‚«ãƒ†ã‚´ãƒªã®ãƒ‡ãƒ¼ã‚¿:', data); // å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª
	                    data.forEach(category => {
	                        middleSelect.append(`<option value="${category.id}">${category.name}</option>`);
	                    });
						
						// ä¸­ã‚«ãƒ†ã‚´ãƒªãŒé¸æŠã•ã‚Œã¦ã„ãªã„å ´åˆã€å¤§ã‚«ãƒ†ã‚´ãƒªã«ç´ã¥ãå°ã‚«ãƒ†ã‚´ãƒªã‚’å–å¾—
						loadSmallCategories(largeCategoryId);
						
					},
	                error: function (xhr, status, error) {
	                    console.error('ä¸­ã‚«ãƒ†ã‚´ãƒªã®ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: ', error);
	                }
	            });
	        } else {
				// å¤§ã‚«ãƒ†ã‚´ãƒªãŒé¸æŠã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã™ã¹ã¦ã®ä¸­ã‚«ãƒ†ã‚´ãƒªã¨å°ã‚«ãƒ†ã‚´ãƒªã‚’è¡¨ç¤º
				loadAllCategories();
	            $('#middleCategoryId').empty().append('<option value="">é¸æŠã—ã¦ãã ã•ã„</option>');
	            $('#smallCategoryId').empty().append('<option value="">é¸æŠã—ã¦ãã ã•ã„</option>');
	        }
	    });
	
	    // ä¸­ã‚«ãƒ†ã‚´ãƒªå¤‰æ›´æ™‚ã«ã€å°ã‚«ãƒ†ã‚´ãƒªã®ãƒªã‚¹ãƒˆã‚’æ›´æ–°ã™ã‚‹
	    $('#middleCategoryId').on('change', function () {
	        const middleCategoryId = $(this).val(); // ä¸­ã‚«ãƒ†ã‚´ãƒªã®IDã‚’å–å¾—
			const largeCategoryId = $('#largeCategoryId').val();
	        console.log("ä¸­ã‚«ãƒ†ã‚´ãƒªã®ID: " + middleCategoryId); // æ­£ã—ã„IDãŒå–å¾—ã§ãã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ãŸã‚ã®ãƒ­ã‚°
	
			const smallSelect = $('#smallCategoryId');
			    smallSelect.empty().append('<option value="">é¸æŠã—ã¦ãã ã•ã„</option>');

	        if (middleCategoryId) {
	            $.ajax({
	                url: `/product/categories/small`,
	                method: 'GET',
	                data: { middleCategoryId: middleCategoryId },
	                success: function (data) {
	                    //const smallSelect = $('#smallCategoryId');
	                    //smallSelect.empty().append('<option value="">é¸æŠã—ã¦ãã ã•ã„</option>');
	                    data.forEach(category => {
	                        smallSelect.append(`<option value="${category.id}">${category.name}</option>`);
	                    });
	                },
	                error: function (xhr, status, error) {
	                    console.error('å°ã‚«ãƒ†ã‚´ãƒªã®ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: ', error);
	                }
	            });
	        } else {
				// ä¸­ã‚«ãƒ†ã‚´ãƒªãŒé¸æŠã•ã‚Œã¦ã„ãªã„å ´åˆã¯å°ã‚«ãƒ†ã‚´ãƒªã‚’å¤§ã‚«ãƒ†ã‚´ãƒªã«ç´ã¥ãã‚‚ã®ã‚’å–å¾—
				loadSmallCategories($('#largeCategoryId').val());
	        }
	    });
		
		// ã™ã¹ã¦ã®ä¸­ã‚«ãƒ†ã‚´ãƒªã¨å°ã‚«ãƒ†ã‚´ãƒªã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹é–¢æ•°
		    function loadAllCategories() {
		        // ã™ã¹ã¦ã®ä¸­ã‚«ãƒ†ã‚´ãƒªã‚’å–å¾—
		        $.ajax({
		            url: `/product/categories/middle`,
		            method: 'GET',
		            success: function (middleData) {
		                const middleSelect = $('#middleCategoryId');
		                middleSelect.empty().append('<option value="">é¸æŠã—ã¦ãã ã•ã„</option>');
		                middleData.forEach(category => {
		                    middleSelect.append(`<option value="${category.id}">${category.name}</option>`);
		                });
		            },
		            error: function (xhr, status, error) {
		                console.error('ä¸­ã‚«ãƒ†ã‚´ãƒªã®ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: ', error);
		            }
		        });
		
		        // ã™ã¹ã¦ã®å°ã‚«ãƒ†ã‚´ãƒªã‚’å–å¾—
		        $.ajax({
		            url: `/product/categories/small`,
		            method: 'GET',
		            success: function (smallData) {
		                const smallSelect = $('#smallCategoryId');
		                smallSelect.empty().append('<option value="">é¸æŠã—ã¦ãã ã•ã„</option>');
		                smallData.forEach(category => {
		                    smallSelect.append(`<option value="${category.id}">${category.name}</option>`);
		                });
		            },
		            error: function (xhr, status, error) {
		                console.error('å°ã‚«ãƒ†ã‚´ãƒªã®ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: ', error);
		            }
		        });
		    }
			
			// å¤§ã‚«ãƒ†ã‚´ãƒªã«ç´ã¥ãå°ã‚«ãƒ†ã‚´ãƒªã‚’å–å¾—ã™ã‚‹é–¢æ•°
			function loadSmallCategories(largeCategoryId) {
			    const smallSelect = $('#smallCategoryId');
			
			    if (largeCategoryId) {
			        $.ajax({
			            url: `/product/categories/small`,
			            method: 'GET',
			            data: { largeCategoryId: largeCategoryId }, // å¤§ã‚«ãƒ†ã‚´ãƒªã®IDã‚’ä½¿ã£ã¦å°ã‚«ãƒ†ã‚´ãƒªã‚’å–å¾—
			            success: function (data) {
			                smallSelect.empty().append('<option value="">é¸æŠã—ã¦ãã ã•ã„</option>');
			                data.forEach(category => {
			                    smallSelect.append(`<option value="${category.id}">${category.name}</option>`);
			                });
			            },
			            error: function (xhr, status, error) {
			                console.error('å°ã‚«ãƒ†ã‚´ãƒªã®ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: ', error);
			            }
			        });
			    }
			}
		});

		// ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã§ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢ã—ã€å…ƒã®ãƒªã‚¹ãƒˆã«æˆ»ã™
        $('#resetButton').on('click', function () {
            $('#searchForm')[0].reset(); // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢
            $.ajax({
                url: '/product/list',
                type: 'GET',
                success: function (response) {
                    const tbody = $('tbody');
                    tbody.empty();  // ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ—¢å­˜è¡Œã‚’ã‚¯ãƒªã‚¢
					console.log(response)
                    response.forEach(product => {
                        const row = `
                            <tr>
                                <td>${product.id}</td>
                                <td>${product.smallCategory.name}</td>
                                <td>${product.manufacturer.name}</td>
                                <td>${product.name}</td>
                                <td>${product.costPrice}</td>
                                <td>${product.manufacturerSuggestedRetailPrice}</td>
                                <td>${product.createdAt}</td>
                                <td><a href="/product/details/${product.id}" class="btn btn-secondary">è©³ç´°</a></td>
                            </tr>
                        `;
                        tbody.append(row);
                    });
                },
                error: function () {
                    alert('ãƒªã‚¹ãƒˆã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
                }
            });
			// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒªã‚’ãƒ­ãƒ¼ãƒ‰
			loadAllCategories();
//			loadProducts(newPage);
        });
</script>
